---
dependencies:
  - role: meta/repository
    repository_key: '0xb9316a7bc7917b12'
    repository_url: 'deb http://ppa.launchpad.net/chris-lea/redis-server/ubuntu trusty main'
  - role: meta/monitor
    monitor_name: redis
    monitor_user: "{{ redis_user }}"
    monitor_pidfile: "{{ redis_server_pidfile_path }}"
    monitor_start_command: /usr/bin/redis-server /etc/redis/redis.conf
    monitor_stop_command: /usr/bin/redis-cli shutdown
    when: redis-server

  - role: meta/logging
    logging_name: redis-server
    logging_user: "{{ redis_user }}"
    logging_files:
      - tags:
          - service
        path: "{{ redis_server_log_path }}"
    when: redis-server
